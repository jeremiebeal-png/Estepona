<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carte — Quartiers d’Estepona</title>
  <meta name="description" content="Carte interactive des quartiers d’Estepona (zones indicatives)." />
  <meta name="theme-color" content="#0b3c49" />

  <link rel="stylesheet" href="/styles.css" />
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
  <style>
    #map{height:80vh;border-radius:16px;border:1px solid #e7efec}
    .legend{background:#fff;padding:8px 10px;border-radius:10px;border:1px solid #e7efec;box-shadow:0 4px 12px rgba(0,0,0,.06);font-size:14px}
    .badge{display:inline-block;width:10px;height:10px;border-radius:2px;margin-right:6px;vertical-align:middle}
    .wrap{max-width:1200px;margin:auto;padding:16px}
    header{padding:14px 0}
    header a{color:#0b3c49}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a href="/index.html">← Retour</a>
      <h1>Carte des quartiers d’Estepona</h1>
      <p>Zones indicatives pour vous repérer rapidement (centre, plage, port).</p>
    </header>

    <div id="map" role="application" aria-label="Carte d’Estepona"></div>
  </div>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    const m = L.map('map', {scrollWheelZoom:true}).setView([36.426, -5.146], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(m);

    // Styles
    const sCentre = { color:'#0b3c49', weight:2, fillColor:'#0b3c49', fillOpacity:.12 };
    const sPlage  = { color:'#2c7a7b', weight:2, fillColor:'#2c7a7b', fillOpacity:.12 };
    const sPort   = { color:'#805ad5', weight:2, fillColor:'#805ad5', fillOpacity:.12 };

    // Polygones très indicatifs (approximatifs)
    const centre = L.polygon([
      [36.4269,-5.1516],[36.4287,-5.1491],[36.4286,-5.1445],[36.4265,-5.1426],
      [36.4247,-5.1449],[36.4246,-5.1494]
    ], sCentre).bindPopup('<b>Centre historique</b><br>Ruelles blanches & fresques.');

    const plage = L.polygon([
      [36.4321,-5.1506],[36.4320,-5.1379],[36.4278,-5.1364],[36.4245,-5.1388],
      [36.4247,-5.1487]
    ], sPlage).bindPopup('<b>Plage & Paseo</b><br>Chiringuitos, balade, jeux.');

    const port = L.polygon([
      [36.4219,-5.1604],[36.4229,-5.1580],[36.4248,-5.1567],[36.4260,-5.1587],
      [36.4250,-5.1620]
    ], sPort).bindPopup('<b>Port & marina</b><br>Rooftops et sorties bateau.');

    centre.addTo(m); plage.addTo(m); port.addTo(m);

    // Repère centre-ville
    L.marker([36.4279, -5.1455]).addTo(m).bindPopup('Vieille ville');

    // Légende
    const legend = L.control({position:'bottomleft'});
    legend.onAdd = function(){
      const div = L.DomUtil.create('div','legend');
      div.innerHTML = `
        <div><span class="badge" style="background:#0b3c49"></span>Centre historique</div>
        <div><span class="badge" style="background:#2c7a7b"></span>Plage & paseo</div>
        <div><span class="badge" style="background:#805ad5"></span>Port & marina</div>`;
      return div;
    };
    legend.addTo(m);
  </script>
</body>
</html>
