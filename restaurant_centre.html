<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Restaurants du Casco Antiguo — Estepona</title>
  <meta name="description" content="Restaurants du centre historique d’Estepona (Casco Antiguo) — classés par places et rues, avec recherche, filtres et liens Google Maps." />
  <meta name="theme-color" content="#0b1730" />

  <style>
    :root{
      --bg:#0b1730; --surface:#0f1f44; --surface-2:#0f1625;
      --primary:#2db4ff; --accent:#00d0b6;
      --text:#eaf2ff; --muted:#a8b6cf; --border:#1a2d5a;
      --radius-xl:18px; --radius-lg:14px; --radius-md:10px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    html,body{
      margin:0;padding:0;background:var(--bg);color:var(--text);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1200px,92vw);margin-inline:auto}

    /* HEADER */
    header{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(180deg, rgba(11,23,48,.95), rgba(11,23,48,.9));
      backdrop-filter:saturate(140%) blur(6px);
      border-bottom:1px solid var(--border);
    }
    .header-row{display:flex;align-items:center;gap:22px;padding:16px 0}
    .brand{display:flex;align-items:center;gap:12px}
    .brand-logo{
      width:44px;height:44px;border-radius:12px;overflow:hidden;
      border:1px solid var(--border);box-shadow:var(--shadow);
    }
    .brand-logo img{width:100%;height:100%;object-fit:contain}
    nav.primary{margin-left:auto;display:flex;gap:12px;flex-wrap:wrap}
    nav.primary a{padding:8px 12px;border-radius:999px;border:1px solid transparent}
    nav.primary a:hover{border-color:var(--border);background:rgba(255,255,255,.04)}

    .search{
      margin-left:auto;display:flex;gap:8px;align-items:center;
      background:var(--surface);border:1px solid var(--border);
      border-radius:999px;padding:8px 12px;
    }
    .search input{
      background:transparent;border:0;outline:0;color:var(--text);
      min-width:240px;font-size:16px; /* iOS zoom fix */
    }

    .burger{
      display:none;width:42px;height:42px;border-radius:12px;border:1px solid var(--border);
      background:var(--surface);cursor:pointer;
    }
    @media (max-width:980px){
      nav.primary,.search{display:none}
      .burger{display:grid;place-items:center;margin-left:auto}
      .header-row{padding:12px 0;gap:12px}
      .brand-logo{width:38px;height:38px}
    }

    /* MENU MOBILE */
    .mobile-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:140}
    .mobile-menu{
      position:fixed;top:0;right:0;height:100vh;width:min(360px,86vw);
      background:linear-gradient(180deg, rgba(15,31,68,1), rgba(11,23,48,1));
      border-left:1px solid var(--border);
      z-index:150;box-shadow:var(--shadow);
      padding:16px;
    }
    .mobile-menu-head{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:6px 0 12px;border-bottom:1px solid var(--border);
    }
    .mobile-close{
      width:42px;height:42px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.03);color:var(--text);
      font-size:22px;cursor:pointer;
    }
    .mobile-nav{display:grid;gap:10px;padding-top:14px}
    .mobile-nav a{
      display:block;padding:12px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.02)
    }
    .mobile-nav a:hover{background:rgba(255,255,255,.05)}

    /* ✅ Bloc de navigation obligatoire */
    .quick-nav-wrap{
      border-top:1px solid var(--border);
      border-bottom:1px solid var(--border);
      background:rgba(15,31,68,0.9);
    }
    .quick-nav-inner{
      padding:8px 0;
      font-size:14px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
    }
    .quick-nav-inner > div a{
      white-space:nowrap;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid transparent;
      display:inline-block;
    }
    .quick-nav-inner > div a:hover{
      border-color:var(--border);
      background:rgba(255,255,255,0.04);
    }

    /* HERO */
    .page-hero{
      padding:22px 0 14px;border-bottom:1px solid var(--border);
      background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(11,23,48,.2) 100%);
    }
    .page-hero h1{margin:0 0 8px;font-size:30px;line-height:1.15}
    .page-hero p{margin:0;color:var(--muted);max-width:760px;font-size:15px;line-height:1.55}
    .pill{
      display:inline-block;margin-bottom:10px;font-size:12px;padding:6px 10px;border-radius:999px;
      background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--muted);
    }
    @media (max-width:980px){
      .page-hero{padding:18px 0 12px}
      .page-hero h1{font-size:22px}
      .page-hero p{font-size:13px}
    }

    /* FILTRES */
    .filters{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .filters h3{font-size:14px;color:var(--muted);margin:0 6px 0 0;font-weight:600}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border-radius:999px;border:1px solid var(--border);
      background:rgba(255,255,255,.04);cursor:pointer;user-select:none;
      font-size:13px;color:var(--muted);
    }
    .chip input{accent-color:var(--primary)}
    .chip:hover{background:rgba(255,255,255,.06);color:var(--text)}

    main{padding:18px 0 40px}

    .grid{display:grid;gap:16px;grid-template-columns:repeat(3,1fr)}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}

    .card{
      display:grid;grid-template-rows:auto 1fr;gap:10px;
      border:1px solid var(--border);border-radius:var(--radius-lg);
      overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
    }
    .card .thumb{
      position:relative;height:clamp(200px,22vw,260px);
      border-radius:16px;overflow:hidden;background:#0b1322;display:block;
    }
    .card .thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center}
    .card .body{padding:12px 14px 16px}
    .card .kicker{font-size:12px;color:var(--muted)}
    .card h3{margin:6px 0 8px;font-size:18px;line-height:1.35}
    .meta{display:flex;flex-wrap:wrap;gap:10px;color:var(--muted);font-size:13px;line-height:1.45}
    .tag{
      padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:12px;
      background:rgba(255,255,255,.03);color:var(--muted);
    }
    .meta a{color:var(--primary);text-decoration:underline;text-decoration-color:rgba(45,180,255,.55)}
    .meta a:hover{color:#7fd3ff}

    footer{
      margin-top:48px;border-top:1px solid var(--border);
      background:linear-gradient(180deg, rgba(15,31,68,1), rgba(11,23,48,1));
    }
    .footer-top{
      padding:24px 0;display:flex;gap:18px;flex-wrap:wrap;
      align-items:center;justify-content:space-between;
    }
    .footer-bottom{padding:16px 0;color:var(--muted);font-size:14px}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="container header-row">
      <a class="brand" href="index.html" aria-label="Accueil">
        <span class="brand-logo"><img src="img/logo_bon_plan_estepona.png" alt="Estepona" /></span>
        <strong>Guide d’Estepona</strong>
      </a>

      <nav class="primary" aria-label="Navigation principale">
        <a href="index.html#manger">Restaurants</a>
        <a href="index.html#itin">Que faire</a>
        <a href="transport-estepona.html">Transport</a>
        <a href="ecoles.html">Écoles</a>
        <a href="sante.html">Santé</a>
        <a href="trafic.html">Trafic</a>
        <a href="index.html#faq">FAQ</a>
        <a href="contact.html">Contact</a>
      </nav>

      <button class="burger" aria-label="Ouvrir le menu" aria-expanded="false">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <!-- ✅ Bloc de navigation obligatoire -->
    <div class="quick-nav-wrap">
      <div class="container quick-nav-inner">
        <div style="display:flex;gap:16px">
          <a href="#places">Places</a>
          <a href="#tags">Budget & tags</a>
          <a href="#liste">Liste</a>
          <a href="contact.html">Contact</a>
        </div>
      </div>
    </div>
  </header>

  <!-- MENU MOBILE -->
  <div id="mobileMenu" hidden class="mobile-menu" aria-label="Menu mobile">
    <div class="mobile-menu-head">
      <strong>Menu</strong>
      <button class="mobile-close" type="button" aria-label="Fermer le menu" onclick="document.querySelector('.burger')?.click()">×</button>
    </div>
    <nav class="mobile-nav">
      <a href="index.html#manger">Restaurants</a>
      <a href="index.html#itin">Que faire</a>
      <a href="transport-estepona.html">Transport</a>
      <a href="ecoles.html">Écoles</a>
      <a href="sante.html">Santé</a>
      <a href="trafic.html">Trafic</a>
      <a href="index.html#faq">FAQ</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>

  <!-- HERO -->
  <section class="page-hero">
    <div class="container">
      <span class="pill">Casco Antiguo · Tapas · Terrasses</span>
      <h1>Restaurants du Casco Antiguo</h1>
      <p>Tous les restaurants du centre historique d’Estepona (classés par places/rues).</p>

      <!-- Recherche -->
      <form class="search" role="search" onsubmit="event.preventDefault();document.querySelector('#liste')?.scrollIntoView({behavior:'smooth'});">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
          <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        <input id="q" type="search" placeholder="Rechercher par nom, rue, spécialité…" aria-label="Rechercher" />
      </form>

      <p id="resultCount" style="margin:10px 0 0;color:var(--muted);font-size:13px"></p>

      <!-- Filtres PLACES -->
      <div class="filters" id="places" aria-label="Filtres par place">
        <h3>Places :</h3>
        <label class="chip"><input type="checkbox" data-place="Plaza de las Flores" /> Plaza de las Flores</label>
        <label class="chip"><input type="checkbox" data-place="Plaza Ortiz" /> Plaza Ortiz</label>
        <label class="chip"><input type="checkbox" data-place="Calle Real" /> Calle Real</label>
        <label class="chip"><input type="checkbox" data-place="Calle Caridad" /> Calle Caridad</label>
        <label class="chip"><input type="checkbox" data-place="Calle Santa Ana" /> Calle Santa Ana</label>
        <label class="chip"><input type="checkbox" data-place="Calle Terraza" /> Calle Terraza</label>
      </div>

      <!-- Filtres BUDGET/TAGS -->
      <div class="filters" id="tags" aria-label="Filtres budget/tags">
        <h3>Budget & tags :</h3>
        <label class="chip"><input type="checkbox" data-filter="€" /> €</label>
        <label class="chip"><input type="checkbox" data-filter="€€" /> €€</label>
        <label class="chip"><input type="checkbox" data-filter="€€€" /> €€€</label>
        <label class="chip"><input type="checkbox" data-filter="tapas" /> Tapas</label>
        <label class="chip"><input type="checkbox" data-filter="italien" /> Italien</label>
        <label class="chip"><input type="checkbox" data-filter="poisson" /> Poisson</label>
        <label class="chip"><input type="checkbox" data-filter="grill" /> Grill</label>
        <label class="chip"><input type="checkbox" data-filter="vin" /> Vin</label>
        <label class="chip"><input type="checkbox" data-filter="créatif" /> Créatif</label>
        <button class="chip" type="button" id="resetFilters">Réinitialiser</button>
      </div>
    </div>
  </section>

  <main class="container" id="liste">
    <div class="grid" id="grid" aria-live="polite"></div>
  </main>

  <footer>
    <div class="container footer-top">
      <a class="brand" href="index.html">
        <span class="brand-logo"><img src="img/logo_bon_plan_estepona.png" alt="Estepona" /></span>
        <strong>Vivre à Estepona</strong>
      </a>
      <div class="meta">Pages: Chiringuitos · Casco Antiguo · Rooftops & Discothèques</div>
    </div>
    <div class="container footer-bottom">© 2026 Bons Plans Estepona · Guide local indépendant</div>
  </footer>

  <!-- Données intégrées -->
  <script id="dataset-casco" type="application/json">
  [
    { "nom":"La Casa del Rey","image":"img/casco/casadelrey.jpg","quartier":"Casco Antiguo","place":"Plaza de las Flores","categorie":"€€","tags":["tapas","vin","patio"],"adresse":"C. Raphael, 7, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=La+Casa+del+Rey+Calle+Raphael+7+Estepona","note":"Tapas & pinchos + grande carte des vins; terrasse/patio." },

    { "nom":"Casafina","image":"img/casco/casafina.jpg","quartier":"Casco Antiguo","place":"Plaza de las Flores","categorie":"€€","tags":["andalou","créatif"],"adresse":"Plaza de las Flores, 12, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Casafina+Plaza+de+las+Flores+12+Estepona","note":"Cuisine andalouse actuelle sur la place centrale." },

    { "nom":"Casa Doña Jerónima","image":"img/casco/donajeronima.jpg","quartier":"Casco Antiguo","place":"Plaza de las Flores","categorie":"€€€","tags":["créatif","gourmet"],"adresse":"(angle Plaza de las Flores) 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Casa+Do%C3%B1a+Jer%C3%B3nima+Estepona","note":"Adresse élégante donnant sur la Plaza de las Flores." },

    { "nom":"La Martina Gastrobar","image":"img/casco/lamartina.jpg","quartier":"Casco Antiguo","place":"Plaza de las Flores","categorie":"€€","tags":["tapas","créatif","cocktails"],"adresse":"Plaza de las Flores, 5, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=La+Martina+Gastrobar+Plaza+de+las+Flores+Estepona","note":"Gastrobar moderne sur la place emblématique." },

    { "nom":"El Rincón Toscano","image":"img/casco/rincontoscano.jpg","quartier":"Casco Antiguo","place":"Calle Real","categorie":"€€","tags":["italien","pâtes","pizza"],"adresse":"C. Real, 22, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=El+Rincon+Toscano+Calle+Real+22+Estepona","note":"Institution italienne du centre historique." },

    { "nom":"Restaurante Sur (Argentin)","image":"img/casco/sur.jpg","quartier":"Casco Antiguo","place":"Plaza Ortiz","categorie":"€€","tags":["argentin","viandes","grill"],"adresse":"Plaza Ortiz, 10, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Restaurante+Sur+Plaza+Ortiz+10+Estepona","note":"Référence pour les viandes argentines, près du front de mer." },

    { "nom":"Restaurante El Cortijo","image":"img/casco/cortijo.jpg","quartier":"Casco Antiguo","place":"Calle Caridad","categorie":"€€","tags":["andalou","traditionnel"],"adresse":"C. Caridad, 64, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Restaurante+El+Cortijo+Calle+Caridad+64+Estepona","note":"Spécialités andalouses, déco traditionnelle." },

    { "nom":"Taberna Miguel","image":"img/casco/tabernamiguel.jpg","quartier":"Casco Antiguo","place":"Calle Caridad","categorie":"€€","tags":["poisson","traditionnel","tapas"],"adresse":"C. Caridad, 30, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Taberna+Miguel+Calle+Caridad+30+Estepona","note":"Classique pour le poisson et les tapas marins." },

    { "nom":"Galpón 22","image":"img/casco/galpon22.jpg","quartier":"Casco Antiguo","place":"Calle Caridad","categorie":"€€€","tags":["méditerranéen","créatif","intimiste"],"adresse":"C. Caridad, 91, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Galpon+22+Calle+Caridad+91+Estepona","note":"Petite table gastronomique dans la vieille ville." },

    { "nom":"The Boab Tree (Natural Wine)","image":"img/casco/boab.jpg","quartier":"Casco Antiguo","place":"Calle Caridad","categorie":"€€","tags":["vin naturel","méditerranéen","art"],"adresse":"C. Caridad, 93, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=The+Boab+Tree+Calle+Caridad+93+Estepona","note":"Cuisine méditerranéenne & vins naturels, avec art live." },

    { "nom":"La Tarantella","image":"img/casco/tarantella.jpg","quartier":"Casco Antiguo","place":"Calle Santa Ana","categorie":"€€","tags":["italien","maison"],"adresse":"C. Santa Ana, 15, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=La+Tarantella+Calle+Santa+Ana+15+Estepona","note":"Maison historique rénovée; pizzas & plats italiens." },

    { "nom":"La Bulla Gastrobar","image":"img/casco/labulla.jpg","quartier":"Front de mer (centre)","place":"Plaza Ortiz","categorie":"€€","tags":["fusion","vue mer","cocktails"],"adresse":"Av. España, 38, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=La+Bulla+Gastrobar+Avenida+Espa%C3%B1a+38+Estepona","note":"Vue plage; ouvert du matin au soir." },

    { "nom":"La Taberna de Lucía","image":"img/casco/lucia.jpg","quartier":"Casco Antiguo","place":"Calle Terraza","categorie":"€","tags":["tapas","familial"],"adresse":"C. Terraza, 108, 29680 Estepona","maps":"https://www.google.com/maps/search/?api=1&query=Taberna+Lucia+Calle+Terraza+108+Estepona","note":"Petite taberna conviviale, tapas maison." }
  ]
  </script>

  <script>
    (function() {
      const dataEl = document.getElementById("dataset-casco");
      const grid = document.getElementById("grid");
      const q = document.getElementById("q");
      const countEl = document.getElementById("resultCount");

      let items = [];
      try { items = JSON.parse((dataEl?.textContent || "").trim()); } catch(e) { items = []; }

      const tagChips = Array.from(document.querySelectorAll('[data-filter]'));
      const placeChips = Array.from(document.querySelectorAll('[data-place]'));
      const resetBtn = document.getElementById("resetFilters");

      function esc(s){
        return String(s ?? "")
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      function render(list) {
        const sorted = [...list].sort((a,b)=>{
          const pa=(a.place||'zzz').toLowerCase(), pb=(b.place||'zzz').toLowerCase();
          if(pa<pb) return -1; if(pa>pb) return 1;
          return (a.nom||'').localeCompare(b.nom||'');
        });

        if(countEl){
          countEl.textContent = `${sorted.length} résultat${sorted.length>1?'s':''} · ${items.length} au total`;
        }

        grid.innerHTML = sorted.map(it => `
          <article class="card">
            <a class="thumb" href="${esc(it.maps||'#')}" target="_blank" rel="noopener">
              <img src="${esc(it.image||'img/placeholder-1.jpg')}" alt="${esc(it.nom||'')}" />
            </a>
            <div class="body">
              <div class="kicker">
                <span class="tag">${esc(it.place||'Casco Antiguo')}</span> · <span class="tag">${esc(it.categorie||'')}</span>
              </div>
              <h3>${esc(it.nom||'')}</h3>
              <div class="meta">${(it.tags||[]).map(t=>`<span class="tag">${esc(t)}</span>`).join('')}</div>
              <div class="meta" style="margin-top:8px">
                Adresse : ${esc(it.adresse||'')} · <a href="${esc(it.maps||'#')}" target="_blank" rel="noopener">Voir sur Maps</a>
              </div>
              ${it.note ? `<div class="meta" style="margin-top:8px">${esc(it.note)}</div>` : ``}
            </div>
          </article>
        `).join('');
      }

      function applyFilters() {
        const txt = (q?.value || '').toLowerCase().trim();
        const tags = tagChips.filter(c=>c.checked).map(c => (c.dataset.filter||'').toLowerCase());
        const places = placeChips.filter(c=>c.checked).map(c => (c.dataset.place||'').toLowerCase());

        const filtered = items.filter(it => {
          const hay = [
            it.nom, it.quartier, it.place, it.categorie,
            ...(it.tags||[]), it.note, it.adresse
          ].join(' ').toLowerCase();

          const matchText = !txt || hay.includes(txt);
          const matchTags = !tags.length || tags.every(t => hay.includes(t));
          const matchPlaces = !places.length || places.includes((it.place||'').toLowerCase());
          return matchText && matchTags && matchPlaces;
        });

        render(filtered);
      }

      q?.addEventListener('input', applyFilters);
      tagChips.forEach(c => c.addEventListener('change', applyFilters));
      placeChips.forEach(c => c.addEventListener('change', applyFilters));

      resetBtn?.addEventListener('click', () => {
        if(q) q.value = "";
        tagChips.forEach(c => c.checked = false);
        placeChips.forEach(c => c.checked = false);
        applyFilters();
      });

      /* Menu mobile */
      const burger = document.querySelector('.burger');
      const mobile = document.getElementById('mobileMenu');
      let backdrop;

      function openMenu(){
        if(!mobile) return;
        mobile.hidden = false;
        burger?.setAttribute('aria-expanded','true');
        backdrop = document.createElement('div');
        backdrop.className = 'mobile-backdrop';
        backdrop.addEventListener('click', closeMenu);
        document.body.appendChild(backdrop);
        document.body.style.overflow='hidden';
      }
      function closeMenu(){
        if(!mobile) return;
        mobile.hidden = true;
        burger?.setAttribute('aria-expanded','false');
        backdrop?.remove();
        document.body.style.overflow='';
      }
      burger?.addEventListener('click',()=>{
        const open = burger.getAttribute('aria-expanded')==='true';
        open ? closeMenu() : openMenu();
      });
      document.addEventListener('keydown',e=>{
        if(e.key==='Escape' && mobile && !mobile.hidden) closeMenu();
      });

      render(items);
      applyFilters();
    })();
  </script>
</body>
</html>
