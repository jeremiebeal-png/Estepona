<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Carte interactive — Quartiers d Estepona</title>

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin="anonymous"
/>

<style>
  html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b1022;color:#e5e7eb}
  .wrap{max-width:1180px;margin:18px auto;padding:0 16px}
  h1{font-size: clamp(22px,3.4vw,34px); margin:10px 0 12px}
  .note{color:#94a3b8; margin:6px 0 14px}
  #map{height:72vh; border-radius:14px; overflow:hidden; border:1px solid rgba(148,163,184,.25); box-shadow:0 16px 36px rgba(2,6,23,.35)}
  .legend{
    margin-top:10px; display:flex; flex-wrap:wrap; gap:10px; align-items:center;
    background:rgba(255,255,255,.03); border:1px solid rgba(148,163,184,.18);
    padding:10px 12px; border-radius:12px;
  }
  .legend .item{display:flex; align-items:center; gap:8px; font-size:14px; color:#cbd5e1}
  .swatch{width:14px; height:14px; border-radius:3px; border:1px solid rgba(255,255,255,.4)}
  .leaflet-popup-content-wrapper{background:#0b1220; color:#e5e7eb; border:1px solid rgba(148,163,184,.25)}
  .leaflet-popup-tip{background:#0b1220}
  .leaflet-control-attribution{background:rgba(7,12,24,.7); color:#94a3b8}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Carte interactive — Quartiers d’Estepona</h1>
    <p class="note">Zones <strong>schématiques</strong> pour usage web. Passe ta souris sur une zone ou clique pour les détails. Tu peux modifier les coordonnées dans le code.</p>
    <div id="map" role="region" aria-label="Carte d’Estepona et secteurs"></div>
    <div class="legend" id="legend"></div>
  </div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="anonymous"></script>

  <script>
  // --- Carte de base ---
  const map = L.map('map', {scrollWheelZoom:true}).setView([36.4276, -5.1459], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap'
  }).addTo(map);

  // --- Données des quartiers (zones approximatives, à ajuster) ---
  const neighborhoods = [
    {
      id:'casco', name:'Casco Antiguo (Vieille ville)', color:'#22d3ee',
      desc:'Centre historique : ruelles blanches, Plaza de las Flores, fresques.',
      coords:[
        [36.4280,-5.1495],[36.4275,-5.1430],[36.4225,-5.1420],[36.4222,-5.1490]
      ]
    },
    {
      id:'puerto', name:'Puerto Deportivo (Port)', color:'#fbbf24',
      desc:'Port de plaisance : bars, restaurants, musique live.',
      coords:[
        [36.4218,-5.1636],[36.4212,-5.1578],[36.4184,-5.1583],[36.4185,-5.1639]
      ]
    },
    {
      id:'seghers', name:'Seghers', color:'#34d399',
      desc:'Quartier résidentiel au-dessus du port, proche Playa del Cristo.',
      coords:[
        [36.4215,-5.1685],[36.4205,-5.1760],[36.4165,-5.1745],[36.4178,-5.1666]
      ]
    },
    {
      id:'rada', name:'Playa de la Rada (zone urbaine)', color:'#60a5fa',
      desc:'Grande plage centrale et paseo maritime.',
      coords:[
        [36.4283,-5.1529],[36.4277,-5.1375],[36.4213,-5.1358],[36.4202,-5.1519]
      ]
    },
    {
      id:'cristo', name:'Playa del Cristo', color:'#f472b6',
      desc:'Crique abritée, eau calme, idéale en famille.',
      coords:[
        [36.4178,-5.1687],[36.4169,-5.1660],[36.4153,-5.1668],[36.4160,-5.1693]
      ]
    },
    {
      id:'cancelada', name:'Cancelada (est)', color:'#a78bfa',
      desc:'Zone résidentielle vers l’est, proche Saladillo.',
      coords:[
        [36.4622,-5.0496],[36.4592,-5.0410],[36.4531,-5.0459],[36.4555,-5.0535]
      ]
    },
    {
      id:'guadalmansa', name:'Guadalmansa', color:'#fb7185',
      desc:'Secteur de plages plus calmes, à l’est du centre.',
      coords:[
        [36.4548,-5.0662],[36.4539,-5.0583],[36.4493,-5.0617],[36.4499,-5.0695]
      ]
    },
    {
      id:'bahiadorada', name:'Bahía Dorada (ouest)', color:'#f59e0b',
      desc:'Urbanisation côté ouest, plages plus sauvages.',
      coords:[
        [36.4391,-5.1918],[36.4379,-5.1829],[36.4326,-5.1861],[36.4336,-5.1938]
      ]
    }
  ];

  // --- Groupes / calques et styles ---
  const group = L.featureGroup().addTo(map);

  const styles = (hex, hovered=false) => ({
    color: hovered ? '#ffffff' : hex,
    weight: hovered ? 3 : 2,
    fillColor: hex,
    fillOpacity: hovered ? 0.35 : 0.22
  });

  // Ajout des polygones avec interactions
  neighborhoods.forEach(nb => {
    const poly = L.polygon(nb.coords, styles(nb.color))
      .bindPopup(`<b>${nb.name}</b><br>${nb.desc}<br><small>Zone indicative</small>`)
      .on('mouseover', function(){ this.setStyle(styles(nb.color, true)); })
      .on('mouseout', function(){ this.setStyle(styles(nb.color, false)); });

    poly.addTo(group);

    // Optionnel : label au centre (tooltip)
    const center = poly.getBounds().getCenter();
    L.marker(center, {
      icon: L.divIcon({
        className:'label',
        html:`<div style="padding:2px 6px;border-radius:8px;background:rgba(0,0,0,.45);color:#fff;font-size:12px">${nb.name}</div>`
      })
    }).addTo(group);
  });

  // Adapter la vue
  map.fitBounds(group.getBounds().pad(0.15));

  // Légende colorée
  const legend = document.getElementById('legend');
  neighborhoods.forEach(nb=>{
    const item = document.createElement('div');
    item.className = 'item';
    item.innerHTML = `<span class="swatch" style="background:${nb.color}"></span>${nb.name}`;
    legend.appendChild(item);
  });

  // Boutons de (dés)activation simples (facultatif) — exemple :
  // -> Tu peux transformer la légende en cases à cocher si tu veux des calques séparés.
  </script>
</body>
</html>
